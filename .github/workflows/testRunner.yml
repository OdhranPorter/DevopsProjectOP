name: Python Test Suite

# 1. Triggers
# This workflow runs on push or pull request events
# but only for the "main" branch.
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# 2. Jobs
# A workflow is made up of one or more jobs
jobs:
  # We'll call our single job "test"
  test:
    # 3. Runner
    # This job will run on a clean virtual machine
    # using the latest version of Ubuntu.
    runs-on: ubuntu-latest

    # 4. Steps
    # These are the tasks the job will perform in order.
    steps:
      # Step 1: Checks out your repository's code
      # so the runner can access it.
      - name: Check out repository code
        uses: actions/checkout@v4

      # Step 2: Sets up the Python environment.
      - name: Set up Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          # This caches your 'pip' packages to speed up future runs.
          cache: 'pip'

      # Step 3: Installs your project's dependencies.
      # This is a critical step.
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      # Step 4: Runs your test suite.
      # This is the command you provided.
      - name: Run test suite
        run: python tests/testSuiteRunner.py
